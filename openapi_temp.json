{"openapi":"3.1.0","info":{"title":"Requirements Mining API V2","description":"Korrigierte Version mit LangExtract-Fixes (Hybrid: FastAPI-Router + eingebettetes Flask).","version":"2.0.0"},"paths":{"/api/v1/lx/config/preview":{"get":{"tags":["lx"],"summary":"Lx Config Preview V2","description":"FastAPI-Port: Konfiguration + optionales Schema ausgeben","operationId":"lx_config_preview_v2_api_v1_lx_config_preview_get","parameters":[{"name":"id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lx/extract":{"post":{"tags":["lx"],"summary":"Lx Extract V2","description":"FastAPI-Port: LangExtract ausführen.\nUnterstützt:\n  - multipart/form-data mit files=[...] (und optionalen Parametern)\n  - application/json mit { text, configId?, prompt_description?, examples? }\nResponse kompatibel zu v2-Implementierung: { lxPreview, savedAs, saveId, configId, chunks }","operationId":"lx_extract_v2_api_v1_lx_extract_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_lx_extract_v2_api_v1_lx_extract_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lx/result/get":{"get":{"tags":["lx"],"summary":"Lx Result Get V2","description":"FastAPI-Port: komplettes gespeichertes LX-Ergebnis zurückgeben.\n- ?saveId=... | ?latest=1","operationId":"lx_result_get_v2_api_v1_lx_result_get_get","parameters":[{"name":"saveId","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Saveid"}},{"name":"latest","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Latest"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lx/result/chunk":{"get":{"tags":["lx"],"summary":"Lx Result Chunk V2","description":"FastAPI-Port: einzelnen Chunk (Text + Payload) aus gespeicherten Ergebnissen liefern.","operationId":"lx_result_chunk_v2_api_v1_lx_result_chunk_get","parameters":[{"name":"saveId","in":"query","required":true,"schema":{"type":"string","title":"Saveid"}},{"name":"idx","in":"query","required":true,"schema":{"type":"integer","title":"Idx"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lx/mine":{"get":{"tags":["lx"],"summary":"Lx Mine From Results V2","description":"FastAPI-Port: Requirements-Items aus lxPreview ableiten (class=requirement).\n- ?saveId=... | ?latest=1","operationId":"lx_mine_from_results_v2_api_v1_lx_mine_get","parameters":[{"name":"saveId","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Saveid"}},{"name":"latest","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":false,"title":"Latest"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/structure/analyze":{"post":{"tags":["structure"],"summary":"Structure Analyze Endpoint Fastapi","description":"FastAPI-Port: Heuristische Struktur-Analyse (Abschnitte, Tabellenzeilen, Bullets, Paragraphs)\n- multipart/form-data: files=[...]\n- application/json: { text?: string, use_wtpsplit?: bool }","operationId":"structure_analyze_endpoint_fastapi_api_v1_structure_analyze_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_structure_analyze_endpoint_fastapi_api_v1_structure_analyze_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/structure/graph_export":{"post":{"tags":["structure"],"summary":"Structure Graph Export Fastapi","description":"FastAPI-Port: Graph-Export\n- multipart/form-data: files=[...] -> führt analyze intern aus und exportiert Graph\n- application/json: { text?: string, components?: [...] }","operationId":"structure_graph_export_fastapi_api_v1_structure_graph_export_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_structure_graph_export_fastapi_api_v1_structure_graph_export_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lx/gold/list":{"get":{"tags":["gold"],"summary":"Lx Gold List Fastapi","description":"FastAPI-Port: Liste gespeicherter Gold-Sets (Dateinamen ohne .json)","operationId":"lx_gold_list_fastapi_api_v1_lx_gold_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/lx/gold/get":{"get":{"tags":["gold"],"summary":"Lx Gold Get Fastapi","description":"FastAPI-Port: Gold-Set laden","operationId":"lx_gold_get_fastapi_api_v1_lx_gold_get_get","parameters":[{"name":"id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/lx/gold/save":{"post":{"tags":["gold"],"summary":"Lx Gold Save Fastapi","description":"FastAPI-Port: Gold-Set speichern\nBody: { \"goldId\": \"demo\", \"gold\": { \"items\": [ { requirementText }, ... ] } }","operationId":"lx_gold_save_fastapi_api_v1_lx_gold_save_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/lx/evaluate":{"post":{"tags":["gold"],"summary":"Lx Evaluate Fastapi","description":"FastAPI-Port: Evaluate predicted requirements against a gold set.\nBody:\n  {\n    goldId?: str,\n    gold?: { items: [ { requirementText } | str ] },\n    saveId?: str, latest?: bool, items?: [ { requirementText } ],\n    threshold?: float,\n    use_embeddings?: bool,\n    embed_threshold?: float\n  }","operationId":"lx_evaluate_fastapi_api_v1_lx_evaluate_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/validate/suggest":{"post":{"tags":["validate"],"summary":"Validate Suggest V2","description":"FastAPI-Port von validate_suggest:\n- Erwartet Array[string] oder { items: string[] }\n- Antwort: { items: { REQ_n: { suggestions: Atom[] } } }","operationId":"validate_suggest_v2_api_v1_validate_suggest_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateSuggestResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/validate/batch":{"post":{"tags":["validate"],"summary":"Validate Batch V2","description":"FastAPI-Port von validate_batch_optimized:\n- Erwartet Array[string] ODER { items: string[], includeSuggestions?: bool }\n- Antwort: Array von Ergebnissen mit Feldern:\n  { id, originalText, correctedText, status, evaluation, score, verdict, suggestions? }","operationId":"validate_batch_v2_api_v1_validate_batch_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ValidateItemResult"},"type":"array","title":"Response Validate Batch V2 Api V1 Validate Batch Post"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/v1/validate/suggest/stream":{"post":{"tags":["validate"],"summary":"Validate Suggest Stream V2","description":"NDJSON-Stream: sendet pro Requirement Suggestions (Atoms) als einzelne JSON-Zeile.\nErwartet Array[string] oder { items: string[], force?: bool }","operationId":"validate_suggest_stream_v2_api_v1_validate_suggest_stream_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/validate/batch/stream":{"post":{"tags":["validate"],"summary":"Validate Batch Stream V2","description":"NDJSON-Stream: sendet pro Requirement ein Ergebnis (Evaluate+Rewrite, optional Suggestions) als einzelne JSON-Zeile.\nErwartet Array[string] oder { items: string[], includeSuggestions?: bool }","operationId":"validate_batch_stream_v2_api_v1_validate_batch_stream_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v2/evaluate/single":{"post":{"tags":["validate"],"summary":"Evaluate Single V2","description":"Service-Layer: Einzel-Evaluation über EvaluationService.","operationId":"evaluate_single_v2_api_v2_evaluate_single_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluateSingleRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluateSingleResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v2/evaluate/batch":{"post":{"tags":["validate"],"summary":"Evaluate Batch V2 Service","description":"Service-Layer: Batch-Evaluation über EvaluationService.","operationId":"evaluate_batch_v2_service_api_v2_evaluate_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EvaluateBatchRequestV2"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/EvaluateBatchItem"},"type":"array","title":"Response Evaluate Batch V2 Service Api V2 Evaluate Batch Post"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/vector/collections":{"get":{"tags":["vector","rag"],"summary":"Vector Collections V2","operationId":"vector_collections_v2_api_v1_vector_collections_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/vector/health":{"get":{"tags":["vector","rag"],"summary":"Vector Health V2","operationId":"vector_health_v2_api_v1_vector_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/vector/reset":{"post":{"tags":["vector","rag"],"summary":"Vector Reset V2","description":"Droppt die Qdrant-Collection und legt sie neu an.\nBody oder Query: { collection?: str, dim?: int }","operationId":"vector_reset_v2_api_v1_vector_reset_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"delete":{"tags":["vector","rag"],"summary":"Vector Reset V2","description":"Droppt die Qdrant-Collection und legt sie neu an.\nBody oder Query: { collection?: str, dim?: int }","operationId":"vector_reset_v2_api_v1_vector_reset_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"get":{"tags":["vector","rag"],"summary":"Vector Reset Get V2","description":"GET-Variante mit confirm=1, optional collection, dim.","operationId":"vector_reset_get_v2_api_v1_vector_reset_get","parameters":[{"name":"confirm","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Confirm"}},{"name":"collection","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Collection"}},{"name":"dim","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Dim"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/vector/source/full":{"get":{"tags":["vector","rag"],"summary":"Vector Source Full V2","description":"Liefert alle Chunks eines sourceFile zusammen mit aggregiertem Text.\nResponse: { sourceFile, chunks: [{chunkIndex,text}], text }","operationId":"vector_source_full_v2_api_v1_vector_source_full_get","parameters":[{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/rag/search":{"get":{"tags":["vector","rag"],"summary":"Rag Search V2","description":"Einfache Vektor-Suche: GET /api/v1/rag/search?query=...&top_k=5&collection=...","operationId":"rag_search_v2_api_v1_rag_search_get","parameters":[{"name":"query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query"}},{"name":"top_k","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":5,"title":"Top K"}},{"name":"collection","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Collection"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/corrections/decision":{"post":{"tags":["corrections"],"summary":"Set Correction Decision V2","description":"Setzt die Entscheidung accepted|rejected für die jüngste Korrektur einer Evaluation.\nBody: { \"evaluationId\": \"...\", \"decision\": \"accepted\"|\"rejected\", \"decidedBy\"?: \"...\" }","operationId":"set_correction_decision_v2_api_v1_corrections_decision_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/corrections/text":{"post":{"tags":["corrections"],"summary":"Save Correction Text V2","description":"Speichert eine manuell eingegebene Korrektur (Correction) zu einer bestehenden Evaluation.\nBody: { \"originalText\": string, \"text\": string }","operationId":"save_correction_text_v2_api_v1_corrections_text_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/corrections/apply":{"post":{"tags":["corrections"],"summary":"Apply Corrections V2","description":"Wendet ausgewählte Suggestions (Atoms) auf eine Anforderung an und erzeugt 1..N neue Umschreibungen.\nBody:\n  {\n    originalText?: string,\n    evaluationId?: string,\n    selectedSuggestions?: Atom[],\n    mode?: \"merge\"|\"split\",\n    context?: {}\n  }","operationId":"apply_corrections_v2_api_v1_corrections_apply_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/corrections/decision/batch":{"post":{"tags":["corrections"],"summary":"Set Correction Decision Batch V2","description":"Setzt Entscheidungen im Batch.\nBody: { \"items\": [ { \"evaluationId\": \"...\", \"decision\": \"accepted\"|\"rejected\", \"decidedBy\"?: \"...\" }, ... ] }","operationId":"set_correction_decision_batch_v2_api_v1_corrections_decision_batch_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/batch/evaluate":{"post":{"tags":["batch"],"summary":"Batch Evaluate V2","operationId":"batch_evaluate_v2_api_v1_batch_evaluate_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/batch/suggest":{"post":{"tags":["batch"],"summary":"Batch Suggest V2","operationId":"batch_suggest_v2_api_v1_batch_suggest_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/batch/rewrite":{"post":{"tags":["batch"],"summary":"Batch Rewrite V2","operationId":"batch_rewrite_v2_api_v1_batch_rewrite_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/manifest/{requirement_id}":{"get":{"tags":["manifest"],"summary":"Get Manifest","description":"Get complete requirement manifest with full lifecycle tracking.\n\nReturns:\n- Requirement metadata (ID, source, checksums, timestamps)\n- Full processing timeline (all stages with scores/verdicts)\n- Evidence chain (source documents, chunks, neighbor context)\n- Split children (if requirement was split)\n\nExample: GET /api/v1/manifest/REQ-535535-api","operationId":"get_manifest_api_v1_manifest__requirement_id__get","parameters":[{"name":"requirement_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequirementManifest"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/manifest/{requirement_id}/timeline":{"get":{"tags":["manifest"],"summary":"Get Manifest Timeline","description":"Get chronological timeline of all processing stages for a requirement.\n\nReturns:\n- All processing stages ordered by started_at timestamp\n- Stage details: name, status, scores, verdicts, latency, token usage\n- Useful for visualizing the requirement's journey through the pipeline\n\nExample: GET /api/v1/manifest/REQ-535535-api/timeline","operationId":"get_manifest_timeline_api_v1_manifest__requirement_id__timeline_get","parameters":[{"name":"requirement_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManifestTimelineResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/manifest/{requirement_id}/children":{"get":{"tags":["manifest"],"summary":"Get Manifest Children","description":"Get all child requirements created when AtomicityAgent split this requirement.\n\nReturns:\n- List of child manifests (if requirement was split)\n- Split relationships with rationale and metadata\n- Empty list if requirement was not split or is atomic\n\nExample: GET /api/v1/manifest/REQ-535535-api/children","operationId":"get_manifest_children_api_v1_manifest__requirement_id__children_get","parameters":[{"name":"requirement_id","in":"path","required":true,"schema":{"type":"string","title":"Requirement Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManifestChildrenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/manifest":{"get":{"tags":["manifest"],"summary":"Query Manifests","description":"Query requirements manifests with filters and pagination.\n\nQuery Parameters:\n- source_type: Filter by source (upload|manual|chunk_miner|api)\n- source_file: Filter by original filename\n- current_stage: Filter by processing stage (input|mining|evaluation|atomicity|etc.)\n- parent_id: Filter by parent ID (to find all splits from a parent)\n- limit: Max results (default: 100, max: 1000)\n- offset: Skip N results for pagination (default: 0)\n\nExample: GET /api/v1/manifest?source_type=chunk_miner&current_stage=evaluation&limit=50","operationId":"query_manifests_api_v1_manifest_get","parameters":[{"name":"source_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by source type: upload|manual|chunk_miner|api","title":"Source Type"},"description":"Filter by source type: upload|manual|chunk_miner|api"},{"name":"source_file","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by source filename","title":"Source File"},"description":"Filter by source filename"},{"name":"current_stage","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by current processing stage","title":"Current Stage"},"description":"Filter by current processing stage"},{"name":"parent_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by parent requirement ID (for splits)","title":"Parent Id"},"description":"Filter by parent requirement ID (for splits)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of results to return","default":100,"title":"Limit"},"description":"Maximum number of results to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of results to skip (for pagination)","default":0,"title":"Offset"},"description":"Number of results to skip (for pagination)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RequirementManifest"},"title":"Response Query Manifests Api V1 Manifest Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/runtime-config":{"get":{"summary":"Runtime Config V2","operationId":"runtime_config_v2_api_runtime_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/ready":{"get":{"summary":"Readiness","operationId":"readiness_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/livez":{"get":{"summary":"Liveness","operationId":"liveness_livez_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_lx_extract_v2_api_v1_lx_extract_post":{"properties":{"files":{"anyOf":[{"items":{"type":"string","format":"binary"},"type":"array"},{"type":"null"}],"title":"Files"},"configId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Configid"},"chunkMode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Chunkmode"},"chunkMin":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Chunkmin"},"chunkMax":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Chunkmax"},"chunkOverlap":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Chunkoverlap"},"structured":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Structured"},"fast":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Fast"},"temperature":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Temperature"}},"type":"object","title":"Body_lx_extract_v2_api_v1_lx_extract_post"},"Body_structure_analyze_endpoint_fastapi_api_v1_structure_analyze_post":{"properties":{"files":{"anyOf":[{"items":{"type":"string","format":"binary"},"type":"array"},{"type":"null"}],"title":"Files"},"use_wtpsplit":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Use Wtpsplit","default":false}},"type":"object","title":"Body_structure_analyze_endpoint_fastapi_api_v1_structure_analyze_post"},"Body_structure_graph_export_fastapi_api_v1_structure_graph_export_post":{"properties":{"files":{"anyOf":[{"items":{"type":"string","format":"binary"},"type":"array"},{"type":"null"}],"title":"Files"},"components":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Components"}},"type":"object","title":"Body_structure_graph_export_fastapi_api_v1_structure_graph_export_post"},"ErrorResponse":{"properties":{"error":{"type":"string","title":"Error","description":"Fehlercode, z. B. invalid_request, internal_error"},"message":{"type":"string","title":"Message","description":"Menschlich lesbare Fehlermeldung"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details","description":"Optionale Detailinformationen (z. B. request_id)"}},"type":"object","required":["error","message"],"title":"ErrorResponse"},"EvalDetailV2":{"properties":{"criterion":{"type":"string","title":"Criterion","description":"Kriteriumsschlüssel, z. B. clarity|testability|measurability"},"score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Score","description":"Score 0..1","default":0.0},"passed":{"type":"boolean","title":"Passed","description":"true, wenn Schwelle für dieses Kriterium erreicht"},"feedback":{"type":"string","title":"Feedback","description":"Optionale Begründung/Rückmeldung des LLM/Heuristik","default":""}},"type":"object","required":["criterion","passed"],"title":"EvalDetailV2"},"EvaluateBatchItem":{"properties":{"id":{"type":"string","title":"Id","description":"Item-Id (z. B. 'item-1')"},"originalText":{"type":"string","title":"Originaltext","description":"Originaltext der Anforderung"},"evaluation":{"items":{"$ref":"#/components/schemas/EvalDetailV2"},"type":"array","title":"Evaluation","description":"Bewertungsdetails je Kriterium"},"score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Score","description":"Aggregierter Score 0..1"},"verdict":{"type":"string","title":"Verdict","description":"pass|fail"}},"type":"object","required":["id","originalText","score","verdict"],"title":"EvaluateBatchItem"},"EvaluateBatchRequestV2":{"properties":{"items":{"items":{"type":"string"},"type":"array","title":"Items","description":"Liste von Requirement-Texten"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context","description":"Kontextobjekt (optional, global)"},"criteria_keys":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Criteria Keys","description":"Teilmenge der Kriterien; Default: alle aktiven"},"threshold":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Threshold","description":"Schwellwert für Gesamtscore (verdict)"}},"type":"object","required":["items"],"title":"EvaluateBatchRequestV2"},"EvaluateSingleRequest":{"properties":{"text":{"type":"string","title":"Text","description":"Zu bewertender Requirement-Text"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context","description":"Kontextobjekt (optional)"},"criteria_keys":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Criteria Keys","description":"Teilmenge der Kriterien; Default: alle aktiven"},"threshold":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Threshold","description":"Schwellwert für Gesamtscore (verdict)"}},"type":"object","required":["text"],"title":"EvaluateSingleRequest"},"EvaluateSingleResponse":{"properties":{"requirementText":{"type":"string","title":"Requirementtext","description":"Originaltext der Anforderung"},"evaluation":{"items":{"$ref":"#/components/schemas/EvalDetailV2"},"type":"array","title":"Evaluation","description":"Bewertungsdetails je Kriterium"},"score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Score","description":"Aggregierter Score 0..1"},"verdict":{"type":"string","title":"Verdict","description":"pass|fail"}},"type":"object","required":["requirementText","score","verdict"],"title":"EvaluateSingleResponse"},"EvaluationDetail":{"properties":{"criterion":{"type":"string","title":"Criterion"},"isValid":{"type":"boolean","title":"Isvalid"},"reason":{"type":"string","title":"Reason"}},"type":"object","required":["criterion","isValid","reason"],"title":"EvaluationDetail"},"EvidenceReference":{"properties":{"source_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source File","description":"Original filename of source document"},"sha1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sha1","description":"SHA1 hash of source document (from ChunkMiner)"},"chunk_index":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Chunk Index","description":"Position in chunked document (0-based)"},"is_neighbor":{"type":"boolean","title":"Is Neighbor","description":"Flag indicating ±1 chunk context (neighbor evidence)","default":false},"evidence_metadata":{"additionalProperties":true,"type":"object","title":"Evidence Metadata","description":"Additional evidence metadata (JSON)"}},"type":"object","title":"EvidenceReference","description":"Evidence reference tracking for requirement source provenance"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ManifestChildrenResponse":{"properties":{"parent_id":{"type":"string","title":"Parent Id","description":"Parent requirement ID"},"children":{"items":{"$ref":"#/components/schemas/RequirementManifest"},"type":"array","title":"Children","description":"Child manifests (if split)"},"split_relationships":{"items":{"$ref":"#/components/schemas/SplitRelationship"},"type":"array","title":"Split Relationships","description":"Split relationship metadata"}},"type":"object","required":["parent_id"],"title":"ManifestChildrenResponse","description":"Response for GET /api/v1/manifest/{requirement_id}/children"},"ManifestTimelineResponse":{"properties":{"requirement_id":{"type":"string","title":"Requirement Id","description":"Requirement ID"},"timeline":{"items":{"$ref":"#/components/schemas/ProcessingStage"},"type":"array","title":"Timeline","description":"Chronological processing stages"}},"type":"object","required":["requirement_id"],"title":"ManifestTimelineResponse","description":"Response for GET /api/v1/manifest/{requirement_id}/timeline"},"ProcessingStage":{"properties":{"id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Id","description":"Auto-incremented stage ID"},"requirement_id":{"type":"string","title":"Requirement Id","description":"Requirement ID (FK to requirement_manifest)"},"stage_name":{"type":"string","title":"Stage Name","description":"Stage name: input|mining|evaluation|atomicity|suggestion|rewrite|validation|completed|failed"},"status":{"type":"string","title":"Status","description":"Stage status: pending|in_progress|completed|failed"},"started_at":{"type":"string","title":"Started At","description":"Stage start timestamp (ISO 8601)"},"completed_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Completed At","description":"Stage completion timestamp (ISO 8601)"},"evaluation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Evaluation Id","description":"Link to evaluation table (if applicable)"},"score":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Score","description":"Overall score for this stage"},"verdict":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Verdict","description":"Verdict: pass|fail"},"atomic_score":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Atomic Score","description":"Atomic criterion score (atomicity stage)"},"was_split":{"type":"boolean","title":"Was Split","description":"Flag indicating requirement was split in this stage","default":false},"model_used":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Model Used","description":"LLM model used (e.g., gpt-4o-mini)"},"latency_ms":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Latency Ms","description":"Processing time in milliseconds"},"token_usage":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"title":"Token Usage","description":"Token usage: {prompt_tokens, completion_tokens, total_tokens}"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message","description":"Error details if status=failed"},"stage_metadata":{"additionalProperties":true,"type":"object","title":"Stage Metadata","description":"Stage-specific additional data (JSON)"}},"type":"object","required":["requirement_id","stage_name","status","started_at"],"title":"ProcessingStage","description":"Processing stage timeline entry for requirement lifecycle tracking"},"RequirementManifest":{"properties":{"requirement_id":{"type":"string","title":"Requirement Id","description":"Stable requirement ID: REQ-{sha1[:6]}-{chunk:03d}"},"requirement_checksum":{"type":"string","title":"Requirement Checksum","description":"SHA256 hash of current requirement text"},"source_type":{"type":"string","title":"Source Type","description":"Source type: upload|manual|chunk_miner|api"},"source_file":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source File","description":"Original filename (if applicable)"},"source_file_sha1":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source File Sha1","description":"Document SHA1 hash (from ChunkMiner)"},"chunk_index":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Chunk Index","description":"Position in chunked document (0-based)"},"original_text":{"type":"string","title":"Original Text","description":"Initial raw requirement text (immutable)"},"current_text":{"type":"string","title":"Current Text","description":"Latest version after processing (updated after rewrites)"},"current_stage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Current Stage","description":"Latest processing stage name"},"parent_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Parent Id","description":"Parent requirement ID (for split requirements)"},"created_at":{"type":"string","title":"Created At","description":"Creation timestamp (ISO 8601)"},"updated_at":{"type":"string","title":"Updated At","description":"Last update timestamp (ISO 8601)"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Additional metadata (JSON)"},"processing_stages":{"items":{"$ref":"#/components/schemas/ProcessingStage"},"type":"array","title":"Processing Stages","description":"Full timeline of processing stages"},"evidence_refs":{"items":{"$ref":"#/components/schemas/EvidenceReference"},"type":"array","title":"Evidence Refs","description":"Source evidence references"},"split_children":{"items":{"type":"string"},"type":"array","title":"Split Children","description":"Child requirement IDs (if split)"}},"type":"object","required":["requirement_id","requirement_checksum","source_type","original_text","current_text","created_at","updated_at"],"title":"RequirementManifest","description":"Main manifest tracking requirement from source to final state"},"SplitRelationship":{"properties":{"parent_id":{"type":"string","title":"Parent Id","description":"Parent requirement ID"},"child_id":{"type":"string","title":"Child Id","description":"Child requirement ID"},"split_rationale":{"type":"string","title":"Split Rationale","description":"Explanation for split (from AtomicityAgent)"},"split_timestamp":{"type":"string","title":"Split Timestamp","description":"Split timestamp (ISO 8601)"},"split_model":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Split Model","description":"Model used for splitting (e.g., gpt-4o-mini)"}},"type":"object","required":["parent_id","child_id","split_rationale","split_timestamp"],"title":"SplitRelationship","description":"Parent-child split relationship (when AtomicityAgent splits requirements)"},"SuggestAtom":{"properties":{"correction":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Correction","description":"Vorgeschlagene neue Fassung oder Teilkorrektur"},"acceptance_criteria":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Acceptance Criteria","description":"Gherkin-ähnliche Kriterien"},"metrics":{"anyOf":[{"items":{"additionalProperties":true,"type":"object"},"type":"array"},{"type":"null"}],"title":"Metrics","description":"Messkriterien/Schwellen"},"criteria":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Criteria","description":"Heuristische Kriterien-Flags"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"original_fragment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Fragment"}},"type":"object","title":"SuggestAtom"},"SuggestionsForReq":{"properties":{"suggestions":{"items":{"$ref":"#/components/schemas/SuggestAtom"},"type":"array","title":"Suggestions"}},"type":"object","title":"SuggestionsForReq"},"ValidateItemResult":{"properties":{"id":{"type":"integer","title":"Id"},"originalText":{"type":"string","title":"Originaltext"},"correctedText":{"type":"string","title":"Correctedtext"},"status":{"type":"string","title":"Status"},"evaluation":{"items":{"$ref":"#/components/schemas/EvaluationDetail"},"type":"array","title":"Evaluation"},"score":{"type":"number","title":"Score","default":0.0},"verdict":{"type":"string","title":"Verdict"},"suggestions":{"anyOf":[{"items":{"$ref":"#/components/schemas/SuggestAtom"},"type":"array"},{"type":"null"}],"title":"Suggestions"},"manifest":{"anyOf":[{"$ref":"#/components/schemas/RequirementManifest"},{"type":"null"}],"description":"Linked requirement manifest (if tracking enabled)"}},"type":"object","required":["id","originalText","correctedText","status","verdict"],"title":"ValidateItemResult"},"ValidateSuggestResponse":{"properties":{"items":{"additionalProperties":{"$ref":"#/components/schemas/SuggestionsForReq"},"type":"object","title":"Items"}},"type":"object","required":["items"],"title":"ValidateSuggestResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}