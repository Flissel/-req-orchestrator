<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Requirements Evaluator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./styles.css">
  <link rel="icon" type="image/svg+xml" href="./favicon.svg">
  <!-- Centralized API configuration -->
  <script src="./config.js"></script>
  <script>
    // Backward compatibility: set window.API_BASE from centralized config
    // app_optimized.js will use window.API_BASE
    window.API_BASE = window.API_CONFIG ? window.API_CONFIG.BACKEND_URL : "http://localhost:8087";
  </script>
</head>
<body>
  <header>
    <h1>Requirements Evaluator</h1>
    <p>Backend: <span class="mono" id="backend-url">...</span> | Frontend lÃ¤uft via Nginx (Port 8081)</p>
    <script>
      // Display actual backend URL
      document.getElementById('backend-url').textContent = window.API_BASE;
    </script>
  </header>

  <main>
    <div class="columns" id="app-columns">
      <!-- Konfiguration / Eingabe -->
      <div class="card" id="input-card">
        <h2>âš™ï¸ Konfiguration</h2>

        <div class="button-group">
          <button id="load-btn">ğŸ“ Load demo MD</button>
          <button id="process-btn" disabled>âš™ï¸ Process</button>
        </div>

        <div class="button-group" style="margin-top:10px;">
          <button id="upload-btn">â¬†ï¸ Upload requirements</button>
          <input id="upload-input" type="file" multiple style="display:none" accept=".md,.pdf,.docx,.txt,.json,application/pdf,application/json,text/plain"/>
        </div>

        <div class="button-group" style="margin-top:10px;">
          <button id="reset-index-btn" title="Drop & recreate the vector index (Qdrant collection).">ğŸ§¹ Reset index</button>
        </div>

        <div class="status" id="status" style="margin-top:12px;">
          Bereit. Klicken Sie 'Load demo MD' oder laden Sie eigene Dateien hoch.
        </div>

        <!-- Requirements Input -->
        <div id="requirements-section" class="card" style="display: none; margin-top: 16px;">
          <h2>ğŸ“ Requirements Input</h2>
          <div id="requirements-display"></div>
        </div>
      </div>

      <!-- Ergebnisse -->
      <div class="card" id="results">
        <h2>ğŸ“Š Ergebnisse</h2>
        <p>Keine Ergebnisse verfÃ¼gbar. Laden Sie zuerst Requirements und starten Sie die Verarbeitung.</p>
      </div>
    </div>
  </main>

  <footer>
    <small>Â© 2025 Requirements Evaluator</small>
  </footer>

  <!-- Batch-only Logik und UI-Handling -->
  <script src="./app_optimized.js?v=inc-4"></script>
</body>
</html>